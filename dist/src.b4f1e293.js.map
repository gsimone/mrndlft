{"version":3,"sources":["src/effect-shell.js","src/stretch-effect.js","src/netflix-slider.js","src/index.js"],"names":["EffectShell","THREE","window","container","document","body","itemsWrapper","setup","initEffectShell","then","isLoaded","isMouseOver","onMouseOver","tempItemIndex","start","createEventsListeners","addEventListener","onWindowResize","bind","renderer","WebGLRenderer","antialias","alpha","setSize","viewport","width","height","setPixelRatio","devicePixelRatio","appendChild","domElement","scene","Scene","camera","PerspectiveCamera","aspectRatio","position","set","mouse","Vector2","timeSpeed","time","clock","Clock","setAnimationLoop","render","getDelta","promises","items","itemsElements","THREEtextureLoader","TextureLoader","forEach","item","index","push","loadTexture","img","src","Promise","resolve","reject","all","promise","texture","element","_onMouseOver","_onMouseMove","_onTouchStart","_onTouchMove","_onMouseLeave","event","onMouseLeave","x","changedTouches","clientX","y","clientY","containerBox","getBoundingClientRect","percentY","touches","Math","floor","length","onMouseMove","aspect","updateProjectionMatrix","loader","url","load","undefined","error","console","clientWidth","clientHeight","distance","z","vFov","fov","PI","tan","querySelectorAll","map","querySelector","StretchEffect","options","strength","init","Vector3","scale","geometry","PlaneBufferGeometry","uniforms","uTexture","value","uOffset","uAlpha","material","ShaderMaterial","vertexShader","fragmentShader","transparent","plane","Mesh","add","reset","onTargetChange","TweenLite","to","ease","Power4","easeOut","currentItem","resetTo","onUpdate","onPositionUpdate","viewSize","offset","clone","sub","multiplyScalar","e","onMouseEnter","imageRatio","naturalWidth","naturalHeight","copy","NetflixSlider","clamp","n","min","max","activeX","childrenArr","Array","from","children","handleResize","isMobile","innerWidth","update","name","handler","bindEvent","handleMouseMove","handleTouchMove","relX","relY","percentX","activeY","requestAnimationFrame","activeIndex","child","i","classList","toggle","bindEvents","preloadImages","imagesLoaded","remove"],"mappings":"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","file":"src.b4f1e293.js","sourceRoot":"..","sourcesContent":["const THREE = window.THREE;\n\nclass EffectShell {\n  constructor(container = document.body, itemsWrapper = null) {\n    this.container = container;\n    this.itemsWrapper = itemsWrapper;\n    if (!this.container || !this.itemsWrapper) return;\n    this.setup();\n\n    this.initEffectShell().then(() => {\n      this.isLoaded = true;\n      if (this.isMouseOver) this.onMouseOver(this.tempItemIndex);\n      this.tempItemIndex = null;\n\n      if (this.start) this.start();\n    });\n\n    this.createEventsListeners();\n  }\n\n  setup() {\n    window.addEventListener(\"resize\", this.onWindowResize.bind(this), false);\n\n    // renderer\n    this.renderer = new THREE.WebGLRenderer({\n      antialias: true,\n      alpha: true,\n    });\n    this.renderer.setSize(this.viewport.width, this.viewport.height);\n    this.renderer.setPixelRatio = window.devicePixelRatio;\n    this.container.appendChild(this.renderer.domElement);\n\n    // scene\n    this.scene = new THREE.Scene();\n\n    // camera\n    this.camera = new THREE.PerspectiveCamera(\n      40,\n      this.viewport.aspectRatio,\n      0.1,\n      100\n    );\n    this.camera.position.set(0, 0, 3);\n\n    //mouse\n    this.mouse = new THREE.Vector2();\n\n    // time\n    this.timeSpeed = 2;\n    this.time = 0;\n    this.clock = new THREE.Clock();\n\n    // animation loop\n    this.renderer.setAnimationLoop(this.render.bind(this));\n  }\n\n  render() {\n    // called every frame\n    this.time += this.clock.getDelta() * this.timeSpeed;\n    this.renderer.render(this.scene, this.camera);\n  }\n\n  initEffectShell() {\n    let promises = [];\n\n    this.items = this.itemsElements;\n\n    const THREEtextureLoader = new THREE.TextureLoader();\n    this.items.forEach((item, index) => {\n      // create textures\n      promises.push(\n        this.loadTexture(\n          THREEtextureLoader,\n          item.img ? item.img.src : null,\n          index\n        )\n      );\n    });\n\n    return new Promise((resolve, reject) => {\n      // resolve textures promises\n      Promise.all(promises).then((promises) => {\n        // all textures are loaded\n        promises.forEach((promise, index) => {\n          // assign texture to item\n          this.items[index].texture = promise.texture;\n        });\n        resolve();\n      });\n    });\n  }\n\n  createEventsListeners() {\n    this.items.forEach((item, index) => {\n      item.element.addEventListener(\n        \"mouseover\",\n        this._onMouseOver.bind(this, index),\n        false\n      );\n    });\n\n    this.container.addEventListener(\n      \"mousemove\",\n      this._onMouseMove.bind(this),\n      false\n    );\n\n    this.container.addEventListener(\n      \"touchstart\",\n      this._onTouchStart.bind(this)\n    );\n\n    this.container.addEventListener(\"touchmove\", this._onTouchMove.bind(this));\n\n    this.itemsWrapper.addEventListener(\n      \"mouseleave\",\n      this._onMouseLeave.bind(this),\n      false\n    );\n  }\n\n  _onTouchStart(event) {\n    this.isMouseOver = true;\n  }\n\n  _onMouseLeave(event) {\n    this.isMouseOver = false;\n    this.onMouseLeave(event);\n  }\n\n  _onTouchMove(event) {\n    // get normalized mouse position on viewport\n    this.mouse.x =\n      (event.changedTouches[0].clientX / this.viewport.width) * 2 - 1;\n    this.mouse.y =\n      -(event.changedTouches[0].clientY / this.viewport.height) * 2 + 1;\n\n    const containerBox = this.itemsWrapper.getBoundingClientRect();\n    const relY = event.touches[0].clientY - containerBox.y;\n    const percentY = relY / containerBox.height;\n    const activeY = Math.floor(this.items.length * percentY);\n  }\n\n  _onMouseMove(event) {\n    // get normalized mouse position on viewport\n    this.mouse.x = (event.clientX / this.viewport.width) * 2 - 1;\n    this.mouse.y = -(event.clientY / this.viewport.height) * 2 + 1;\n\n    this.onMouseMove(event);\n  }\n\n  _onMouseOver(index, event) {\n    this.tempItemIndex = index;\n    this.onMouseOver(index, event);\n  }\n\n  onWindowResize() {\n    this.camera.aspect = this.viewport.aspectRatio;\n    this.camera.updateProjectionMatrix();\n    this.renderer.setSize(this.viewport.width, this.viewport.height);\n  }\n\n  onUpdate() {}\n\n  onMouseEnter(event) {}\n\n  onMouseLeave(event) {}\n\n  onMouseMove(event) {}\n\n  onMouseOver(index, event) {}\n\n  get viewport() {\n    let width = this.container.clientWidth;\n    let height = this.container.clientHeight;\n    let aspectRatio = width / height;\n    return {\n      width,\n      height,\n      aspectRatio,\n    };\n  }\n\n  get viewSize() {\n    // fit plane to screen\n    // https://gist.github.com/ayamflow/96a1f554c3f88eef2f9d0024fc42940f\n\n    let distance = this.camera.position.z;\n    let vFov = (this.camera.fov * Math.PI) / 180;\n    let height = 2 * Math.tan(vFov / 2) * distance;\n    let width = height * this.viewport.aspectRatio;\n    return { width, height, vFov };\n  }\n\n  get itemsElements() {\n    // convert NodeList to Array\n    const items = [...this.itemsWrapper.querySelectorAll(\".link\")];\n\n    //create Array of items including element, image and index\n    return items.map((item, index) => ({\n      element: item,\n      img: item.querySelector(\"img\") || null,\n      index: index,\n    }));\n  }\n\n  loadTexture(loader, url, index) {\n    // https://threejs.org/docs/#api/en/loaders/TextureLoader\n    return new Promise((resolve, reject) => {\n      if (!url) {\n        resolve({ texture: null, index });\n        return;\n      }\n      // load a resource\n      loader.load(\n        // resource URL\n        url,\n\n        // onLoad callback\n        (texture) => {\n          resolve({ texture, index });\n        },\n\n        // onProgress callback currently not supported\n        undefined,\n\n        // onError callback\n        (error) => {\n          console.error(\"An error happened.\", error);\n          reject(error);\n        }\n      );\n    });\n  }\n}\nexport default EffectShell;\n","import EffectShell from \"./effect-shell\";\n\nclass StretchEffect extends EffectShell {\n  constructor(container = document.body, itemsWrapper = null, options = {}) {\n    super(container, itemsWrapper);\n    if (!this.container || !this.itemsWrapper) return;\n\n    options.strength = options.strength || 0.25;\n    this.options = options;\n\n    this.tempItemIndex = 0;\n\n    this.init();\n  }\n\n  init() {\n    this.position = new THREE.Vector3(0, 0, 0);\n    this.scale = new THREE.Vector3(1, 1, 1);\n    this.geometry = new THREE.PlaneBufferGeometry(1, 1, 32, 32);\n    this.uniforms = {\n      uTexture: {\n        value: null,\n      },\n      uOffset: {\n        value: new THREE.Vector2(0.0, 0.0),\n      },\n      uAlpha: {\n        value: 0,\n      },\n    };\n    this.material = new THREE.ShaderMaterial({\n      uniforms: this.uniforms,\n      vertexShader: `\n  uniform vec2 uOffset;\n\n  varying vec2 vUv;\n\n  vec3 deformationCurve(vec3 position, vec2 uv, vec2 offset) {\n    float M_PI = 3.1415926535897932384626433832795;\n    position.x = position.x + (sin(uv.y * M_PI) * offset.x);\n    position.y = position.y + (sin(uv.x * M_PI) * offset.y);\n    return position;\n  }\n\n  void main() {\n    vUv =  uv + (uOffset * 2.);\n    vec3 newPosition = position;\n    newPosition = deformationCurve(position,uv,uOffset);\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );\n  }\n`,\n      fragmentShader: `\n  uniform sampler2D uTexture;\n  uniform float uAlpha;\n\n  varying vec2 vUv;\n\n  vec2 scaleUV(vec2 uv,float scale) {\n    float center = 0.5;\n    return ((uv - center) * scale) + center;\n  }\n\n  void main() {\n    vec3 color = texture2D(uTexture,scaleUV(vUv,0.8)).rgb;\n    gl_FragColor = vec4(color,uAlpha);\n  }\n`,\n      transparent: true,\n    });\n    this.plane = new THREE.Mesh(this.geometry, this.material);\n    this.scene.add(this.plane);\n\n    this.reset();\n  }\n\n  start() {\n    this.onTargetChange(0);\n\n    TweenLite.to(this.uniforms.uAlpha, 1, {\n      value: 1,\n      ease: Power4.easeOut,\n    });\n  }\n\n  onMouseEnter() {\n    if (!this.currentItem || !this.isMouseOver) {\n      this.isMouseOver = true;\n      // show plane\n      TweenLite.to(this.uniforms.uAlpha, 0.5, {\n        value: 1,\n        ease: Power4.easeOut,\n      });\n    }\n  }\n\n  reset() {\n    const resetTo = this.items[this.tempItemIndex] || this.items[0];\n\n    const { x, width, y, height } = resetTo.element.getBoundingClientRect();\n\n    const center = {\n      x: (x + width) / 2,\n      y: (y + height) / 2,\n    };\n\n    this.position = new THREE.Vector3(0, 0, 0);\n    TweenLite.to(this.plane.position, 1, {\n      x: 0,\n      y: 0,\n      ease: Power4.easeOut,\n      onUpdate: this.onPositionUpdate.bind(this),\n    });\n\n    // reset back to first picture\n    this.uniforms.uTexture.value = resetTo.texture;\n  }\n\n  onMouseLeave(event) {\n    // reset position\n    this.reset();\n  }\n\n  onMouseMove(event) {\n    if (this.isMouseOver) {\n      // project mouse position to world coodinates\n      let x = this.mouse.x.map(\n        -1,\n        1,\n        -this.viewSize.width / 2,\n        this.viewSize.width / 2\n      );\n\n      let y = this.mouse.y.map(\n        -1,\n        1,\n        -this.viewSize.height / 2,\n        this.viewSize.height / 2\n      );\n\n      const OFFSET = 0.75;\n\n      // update position\n      this.position = new THREE.Vector3(x, y + OFFSET, 0);\n      TweenLite.to(this.plane.position, 1, {\n        x: x,\n        y: y + OFFSET,\n        ease: Power4.easeOut,\n        onUpdate: this.onPositionUpdate.bind(this),\n      });\n    }\n  }\n\n  onPositionUpdate() {\n    // compute offset\n    let offset = this.plane.position\n      .clone()\n      .sub(this.position)\n      .multiplyScalar(-this.options.strength);\n    this.uniforms.uOffset.value = offset;\n  }\n\n  onMouseOver(index, e) {\n    if (!this.isLoaded) return;\n    this.onMouseEnter();\n    if (this.currentItem && this.currentItem.index === index) return;\n    this.onTargetChange(index);\n  }\n\n  onTargetChange(index) {\n    // item target changed\n    this.currentItem = this.items[index];\n    if (!this.currentItem.texture) return;\n\n    // compute image ratio\n    let imageRatio =\n      this.currentItem.img.naturalWidth / this.currentItem.img.naturalHeight;\n\n    this.scale = new THREE.Vector3(imageRatio, 1, 1);\n    this.uniforms.uTexture.value = this.currentItem.texture;\n    this.plane.scale.copy(this.scale);\n  }\n}\n\nexport default StretchEffect;\n","function clamp(n, min, max) {\n  return Math.min(Math.max(n, min), max);\n}\n\nclass NetflixSlider {\n  constructor(container) {\n    this.container = container;\n    this.activeX = 0;\n    this.childrenArr = Array.from(this.container.children);\n    this.handleResize();\n  }\n\n  handleResize() {\n    this.isMobile = window.innerWidth < 800;\n    this.update();\n  }\n\n  bindEvent(name, handler) {\n    this.container.addEventListener(name, handler);\n  }\n\n  bindEvents() {\n    this.bindEvent(\"mousemove\", this.handleMouseMove.bind(this));\n    this.bindEvent(\"touchmove\", this.handleTouchMove.bind(this));\n\n    window.addEventListener(\"resize\", this.handleResize.bind(this));\n  }\n\n  // touchmove adapter\n  handleTouchMove(e) {\n    this.handleMouseMove(e.touches[0]);\n  }\n\n  handleMouseMove(e) {\n    const containerBox = this.container.getBoundingClientRect();\n\n    const relX = e.clientX - containerBox.x;\n    const relY = e.clientY - containerBox.y;\n\n    const percentX = relX / containerBox.width;\n    const percentY = relY / containerBox.height;\n\n    const activeX = Math.floor(this.container.children.length * percentX);\n    const activeY = Math.floor(this.container.children.length * percentY);\n\n    if (activeX !== this.activeX && !this.isMobile) {\n      this.activeX = clamp(activeX, 0, this.childrenArr.length - 1);\n      this.update();\n    }\n\n    if (activeY !== this.activeY && this.isMobile) {\n      this.activeY = clamp(activeY, 0, this.childrenArr.length - 1);\n      this.update();\n    }\n  }\n\n  update() {\n    requestAnimationFrame(() => {\n      const activeIndex = this.isMobile ? this.activeY : this.activeX;\n      this.childrenArr.forEach((child, i) => {\n        child.classList.toggle(\"before\", i < activeIndex);\n        child.classList.toggle(\"active\", i === activeIndex);\n        child.classList.toggle(\"after\", i > activeIndex);\n      });\n    });\n  }\n\n  init() {\n    this.bindEvents();\n  }\n}\n\nexport default NetflixSlider;\n","// import \"./styles.css\";\nimport StretchEffect from \"./stretch-effect\";\nimport NetflixSlider from \"./netflix-slider\";\n\nconst container = document.body;\nconst itemsWrapper = document.querySelector(\".grid\");\nconst preloadImages = () => {\n  return new Promise((resolve, reject) => {\n    imagesLoaded(document.querySelectorAll(\"img\"), resolve);\n  });\n};\n\npreloadImages().then(() => {\n  document.body.classList.remove(\"loading\");\n\n  const effect = new StretchEffect(container, itemsWrapper);\n  const slider = new NetflixSlider(document.querySelector(\".grid\"));\n  slider.init();\n});\n"]}